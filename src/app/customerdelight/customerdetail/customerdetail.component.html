<div class="my-2 d-flex justify-content-between">
    <div class="header">
        <h3 class="m-2"><b>Customer Details</b></h3>
    </div>
    <div>
        <button type="button" class="btn btn-raised btn-primary float-right align-self-end" style="margin-top: 10px;"
            (click)="Back()">
            Back
        </button>
    </div>
</div>


<div class="ui-fluid shadow p-3 m-2 bg-white rounded table table-hover">
    <div class="card">
        <div class="row">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-4">
                        <label><span style="color:red">*</span> SKCode</label>
                        <input type="text" id="Skcode" name="Skcode" autocomplete="off" [disabled]="true"
                            class="form-control" [(ngModel)]="customer.Skcode">
                    </div>

                    <div class="col-md-8">
                        <label><span style="color:red">*</span> Shop Name</label>
                        <input type="text" id="ShopName" name="ShopName" autocomplete="off" [disabled]="true"
                            class="form-control" [(ngModel)]="customer.ShopName">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <label>Status</label>
                        <input type="text" id="Status" name="Status" autocomplete="off" [disabled]="true"
                            class="form-control" [(ngModel)]="customer.CustomerStatus">
                    </div>
                    <div class="col-md-3">
                        <label>Shop Status</label>
                        <input type="text" id="ShopStatus" name="ShopStatus" autocomplete="off" [disabled]="true"
                            class="form-control" [(ngModel)]="customer.ShopStatus">
                    </div>

                    <div class="col-md-3">
                        <label>City</label>
                        <input type="text" id="City" name="City" autocomplete="off" [disabled]="true"
                            class="form-control" [(ngModel)]="customer.City">
                    </div>
                    <div class="col-md-3">
                        <label>Warehouse</label>
                        <input type="text" id="Wherehouse" name="Wherehouse" autocomplete="off" [disabled]="true"
                            class="form-control" [(ngModel)]="customer.WarehouseName">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <label><span style="color:red">*</span> Shipping Address</label>
                        <textarea type="text" id="ShippingAddress" name="ShippingAddress" autocomplete="off"
                            class="form-control" [(ngModel)]="customer.ShippingAddress"></textarea>
                    </div>
                </div>
                <div class="row">

                    <div class="col-md-6">
                        <label><span style="color:red">*</span> Area</label>
                        <input type="text" id="AreaName" name="AreaName" autocomplete="off" class="form-control"
                            [(ngModel)]="customer.AreaName">
                    </div>
                    <div class="col-md-6">
                        <label><span style="color:red">*</span> City</label>
                        <input type="text" id="CityName" name="CityName" autocomplete="off" class="form-control"
                            [(ngModel)]="CityName">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label><span style="color:red">*</span> State</label>
                        <input type="text" id="State" name="State" autocomplete="off" class="form-control"
                            [(ngModel)]="customer.State">
                    </div>
                    <div class="col-md-6">
                        <label><span style="color:red">*</span> ZipCode</label>
                        <input type="text" id="ZipCode" name="ZipCode" autocomplete="off" class="form-control"
                            [(ngModel)]="customer.ZipCode">
                    </div>
                </div>

            </div>

            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-8">
                        <label><span style="color:red">*</span> Customer Name</label>
                        <input type="text" id="Name" name="Name" autocomplete="off" class="form-control"
                            [disabled]="true" [(ngModel)]="customer.Name">
                    </div>

                    <div class="col-md-4">
                        <label><span style="color:red">*</span> Mobile</label>
                        <input type="text" id="Mobile" name="Mobile" autocomplete="off" class="form-control"
                            [disabled]="true" [(ngModel)]="customer.Mobile">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label>Customer Type</label>
                        <!-- <input type="text" id="CustomerType" name="CustomerType" autocomplete="off" class="form-control"
                            [(ngModel)]="customer.CustomerType"> -->
                        <select class="form-control" name="CustomerType" [(ngModel)]="customer.CustomerType">
                            <option value="Retailer">Retailer</option>
                            <option value="Super Stockist">Super Stockist</option>
                            <option value="Distributor">Distributor</option>
                            <option value="SKP">SKP</option>
                            <option value="KPP">KPP</option>
                            <option value="Agent">Agent</option>
                            <option value="RDS">RDS</option>
                            <option value="Wholesaler">Wholesaler</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label>Active</label>
                        <select class="form-control" name="Active" [(ngModel)]="customer.Active">
                            <option value="">--Select--</option>
                            <option value="1">Yes</option>
                            <option value="0">No</option>
                        </select>


                    </div>
                    <div class="col-md-4">
                        <label>Verified</label>
                        <select class="form-control" name="CustomerVerify" [(ngModel)]="customer.CustomerVerify">
                            <option value="">--Select--</option>
                            <option value="Full Verified">Full Verified</option>
                            <option value="Not Verified">Not Verified</option>
                            <option value="Pending For Activation">Pending For Activation</option>
                            <option value="Pending For Submitted">Pending For Submitted</option>
                            <option value="Temporary Active">Temporary Active</option>
                            <!-- <option value="Address Not Found">Address Not Found</option> -->
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>GST Number</label>
                        <input type="text" id="GSTno" name="GSTno" autocomplete="off" class="form-control"
                            [disabled]="true" [(ngModel)]="customer.GSTno">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4" *ngIf="GSTImage">
                        <label>GST Image</label>
                        <br>
                        <div class="form-group" (click)="openImage(GSTImage)">
                            <img *ngIf="GSTImage" src="{{baseURL}}{{GSTImage}}" height="130px" width="150px">
                        </div>
                    </div>
                    <div class="col-md-4" *ngIf="CaptureImagePath">
                        <label>Shop Image</label>
                        <br>
                        <div class="form-group" (click)="openShopImage(CaptureImagePath)">
                            <img *ngIf="CaptureImagePath" src="{{CaptureImagePath}}" height="130px" width="150px">
                        </div>
                    </div>
                    <div class="col-md-4" *ngIf="RegistrationImage">
                        <label>Registration Image</label>
                        <br>
                        <div class="form-group" (click)="openRegistrationImage(RegistrationImage)">
                            <img *ngIf="RegistrationImage" src="{{baseURL}}{{RegistrationImage}}" height="130px"
                                width="150px">
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <hr>
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12">
                    <label>Billing Address</label>
                    <textarea type="text" id="BillingAddress" name="BillingAddress" autocomplete="off"
                        class="form-control" [(ngModel)]="customer.BillingAddress"
                        (blur)="getLatLong(customer.BillingAddress)" [disabled]="customer.GSTno.length > 0"></textarea>
                </div>
            </div>
            <div class="row">

                <div class="col-md-3">
                    <label><span style="color:red">*</span> Billing Area</label>
                    <input type="text" id="BillingAddress1" name="BillingAddress1" autocomplete="off"
                        class="form-control" [(ngModel)]="customer.BillingAddress1">
                </div>
                <div class="col-md-3">
                    <label><span style="color:red">*</span> Billing City</label>
                    <input type="text" id="BillingCity" name="BillingCity" autocomplete="off" class="form-control"
                        [(ngModel)]="customer.BillingCity">
                </div>
                <div class="col-md-3">
                    <label><span style="color:red">*</span> Billing State</label>
                    <input type="text" id="BillingState" name="BillingState" autocomplete="off" class="form-control"
                        [(ngModel)]="customer.BillingState">
                </div>
                <div class="col-md-3">
                    <label><span style="color:red">*</span> Billing ZipCode</label>
                    <input type="text" id="BillingZipCode" name="BillingZipCode" autocomplete="off" class="form-control"
                        [(ngModel)]="customer.BillingZipCode">
                </div>
            </div>


            <div class="row" style="padding-top: 10px;">
                <div class="col-md-4">
                    <label>
                        <p-radioButton name="UpdateLatLg" value="ShipLatLg" [(ngModel)]="selectedValue"></p-radioButton>
                        Shipping Lat Long

                    </label>
                    <input type="text" id="latlong" name="latlong" autocomplete="off" class="form-control"
                        [disabled]="true" [(ngModel)]="latlong">
                </div>
                <div class="col-md-4" *ngIf="GSTImage || CaptureImagePath || RegistrationImage">
                    <label>
                        <p-radioButton name="UpdateLatLg" value="ShopLatLg" [(ngModel)]="selectedValue"></p-radioButton>
                        Registration Shop Lat Long

                    </label>
                    <input type="text" id="shoplatlong" name="shoplatlong" autocomplete="off" class="form-control"
                        [disabled]="true" [(ngModel)]="shoplatlong">

                </div>
                <div class="col-md-4">
                    <label>
                        <p-radioButton name="UpdateLatLg" value="trackLatLg" [(ngModel)]="selectedValue">
                        </p-radioButton> Track Shop Lat Long

                    </label>
                    <input type="text" id="newlatlong" name="newlatlong" autocomplete="off" class="form-control"
                        [disabled]="true" [(ngModel)]="newlatlong">
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="col-md-12"><label>Shipping To Shop distance: <b>{{ distanceShopShip.toFixed(2) }}
                                Km.</b></label> </div>
                    <div class="col-md-12"><label>Shop To Tracking distance: <b>{{ distanceShopTrack.toFixed(2) }}
                                Km.</b></label></div>
                    <div class="col-md-12"><label>Shipping To Tracking distance: <b>{{ distanceShipTrack.toFixed(2) }}
                                Km.</b></label></div>
                </div>
                <div class="col-md-4">
                    <label>Updated Track Address</label>
                    <textarea type="text" id="NewShippingAddress" name="NewShippingAddress" [disabled]="true"
                        autocomplete="off" class="form-control" [(ngModel)]="customer.NewShippingAddress"></textarea>
                </div>
            </div>
        </div>

    </div>
    <br />

    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <label>Enter Location</label>
                <input placeholder="search for location" autocorrect="off" autocapitalize="off" spellcheck="off"
                    name="Loc" type="text" class="form-control" #search [formControl]="searchControl">
            </div>
            <div class="sk">
                <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [zoomControl]="true"
                    [fullscreenControl]="true" [disableDefaultUI]="false" [zoomControl]="false"
                    [style.height.px]="myInnerHeight" (mapReady)="mapReading()">
                    <agm-direction [origin]="origin" [destination]="origin" [waypoints]="expectedWaypoints"
                        [markerOptions]="markerOptions">
                    </agm-direction>
                    <agm-marker *ngFor="let wp of expectedWaypoints; let i = index;" label="{{i+1}}" label="Updated"
                        [latitude]="wp.location.lat" [longitude]="wp.location.lng"
                        (dragEnd)="markerDragEnd(latitude, longitude, $event)" [markerDraggable]="true">
                        <agm-info-window [disableAutoPan]="false" #infoWindow>
                            <div>

                            </div>
                        </agm-info-window>
                    </agm-marker>

                    <agm-marker label="Current" [latitude]="origin.lat" [longitude]="origin.lng"
                        [iconUrl]="waypointMarker">
                        <agm-info-window [disableAutoPan]="false" #infoWindow>
                            <div>

                            </div>
                        </agm-info-window>
                    </agm-marker>
                    <agm-marker label="Shop" [latitude]="shopOrigin.lat" [longitude]="shopOrigin.lng"
                        [iconUrl]="shopwaypointMarker">
                        <agm-info-window [disableAutoPan]="false" #infoWindow>
                            <div>

                            </div>
                        </agm-info-window>
                    </agm-marker>
                    <agm-marker label="Today Tracking" *ngIf="getTodayLatLng" [latitude]="todayTrackingOrigin.lat"
                        [longitude]="todayTrackingOrigin.lng" [iconUrl]="todayTrackwaypointMarker"
                        [animation]="userLocationMarkerAnimation"
                        (markerClick)="onClickTodayTrackForUpdate(todayTrackingOrigin.lat,todayTrackingOrigin.lng)">
                        <agm-info-window [disableAutoPan]="false" #infoWindow>
                            <div>
                                {{customer.TodayTrackAddress}}
                            </div>
                        </agm-info-window>
                    </agm-marker>
                    <!-- <agm-marker label="Billing Address" *ngIf="isBillingAddress" [latitude]="billingAddressOrigin.lat" [longitude]="billingAddressOrigin.lng"
             [iconUrl]="billingaddresspointMarker" [animation]="userLocationMarkerAnimation"   (markerClick)="onClickBillingAddressForUpdate(billingAddressOrigin.lat,billingAddressOrigin.lng)">
             <agm-info-window [disableAutoPan]="false" #infoWindow>
                 <div>
                    {{customer.BillingAddress}}
                 </div>
             </agm-info-window>
          </agm-marker> -->
                </agm-map>
            </div>
        </div>
    </div>
    <br>
    <div class="row" *ngIf="custTracking">
        <div class="col-md-4">
            <label for="nodocument">No Document</label><br>
            <p-checkbox binary="true" id="nodocument" name="nodocument" [(ngModel)]="Nodocument" label=""></p-checkbox>
        </div>
        <div class="col-md-3">
            <label for="comment">Add Comments</label>
            <textarea class="form-control" id="comment" rows="1" name="comment" [(ngModel)]="Comment"
                label="Add Comments">Add Comments</textarea>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-4">
            <input type="submit" *ngIf="IsbuttonShow" class="btn btn-raised btn-primary" (click)="Reject()"
                value="Reject">&nbsp;
            <input type="submit" *ngIf="IsbuttonShow" class="btn btn-raised btn-success" (click)="Verified()"
                value="Verified">&nbsp;
            <input type="submit" class="btn btn-raised btn-warning" (click)="resetAllTracking()"
                *ngIf="SelectedStatus != 3 && IsbuttonShow" value="Request Reset_In">
        </div>
    </div>
</div>
<p-dialog header="Request For Update LatLong or Address or Both" [(visible)]="isOpenTodayTrack" appendTo="body">
    <span style="font-size: 1.5em;">Do You want to update !!</span>
    <div style="margin-top: 1em;">
        <!-- <h6>*<strong>Today Track LatLong</strong> : {{todayTrackingOrigin.lat + ' ' + todayTrackingOrigin.lng}}</h6> -->
        <!-- <h6>*<strong>Today Address</strong> : {{customer.TodayTrackAddress}}</h6> -->
    </div>
    <div style="font-size: 1.2em;">
        <p-checkbox name="groupname" value="todaytracklatlong"
            label="Today Track LatLong : {{todayTrackingOrigin.lat + ' ' + todayTrackingOrigin.lng}}"
            [(ngModel)]="selectedValues"><strong>LantLong</strong></p-checkbox>
    </div>

    <div style="font-size: 1.2em;">
        <p-checkbox name="groupname" value="customer.TodayTrackAddress"
            label="Today Address : {{customer.TodayTrackAddress}}" [(ngModel)]="selectedValues"><strong>Address</strong>
        </p-checkbox>
    </div>

    <footer>
        <button type="button" class="btn btn-raised btn-primary float-right align-self-end" name="btn" id="btn"
            (click)="onClickConfirmation(selectedValues)" [disabled]="selectedValues.length==0">Update</button>
    </footer>
</p-dialog>
<p-confirmDialog #cd appendTo="body" header="Confirmation">
    <p-footer>
        <button type="button" class="btn btn-raised btn-primary mr-1" (click)="cd.reject()">No</button>
        <button type="button" class="btn btn-raised btn-danger mr-1" (click)="cd.accept()">Yes</button>
    </p-footer>
</p-confirmDialog>