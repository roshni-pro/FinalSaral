<div class="w3-container w3-center w3-animate-left">
  <div class="header">
    <!-- <h1><i class="fas fa-piggy-bank" style='font-size:48px;color:red'></i></h1> -->
    <h3 class="m-"><br>Gullak <i class='fas fa-piggy-bank' style='font-size:48px;color:red'></i></h3>
  </div>
</div>

<div class="ui-fluid shadow p-3 m-2 bg-white rounded table table-hover">
  <form name="wh" #whForm="ngForm">
    <div class="row">
      <!-- <div class="form-group" class="col-sm-3">
        <label for="wh"> <b>Warehouse:</b></label><br>
        <select id="wh" name="wh" class="form-control" [(ngModel)]="WarehouseId" placeholder="Select Warehouse"
          #wh="ngModel" required="1">
          <option value="">Select Warehouse</option>
          <option *ngFor="let wh of warehouse" [ngValue]="wh.WarehouseId">
            {{wh.WarehouseName}}
          </option>
        </select>
        <div *ngIf="isInvalid && !wh.valid && wh.errors.required">
          <code>Warehouse Name is required</code>
        </div>
      </div> -->

      <div class="form-group" class="col-sm-3">
        <label for="skcode"> <b>SkCode:</b></label><br>
        <input id="skcode" name="skcode" class="form-control" [(ngModel)]="Skcode" placeholder="Select SKCode" />
      </div>

      <div class="form-group" class="col-sm-2">
        <button class="btn btn-raised btn-raised btn-primary a1" (click)="OnClick(whForm)">Search</button>
      </div>
        
      <div class="form-group" class="col-sm-2">
        <button type="button" class="btn btn-raised btn-primary a1" (click)="ExportGullak() ">Export Gullak List</button>
      </div>

      <div class="form-group" class="col-sm-2">
        <button type="button" class="btn btn-raised btn-primary a1" (click)="addGullakData(Skcode) " *ngIf="showGullak">Add Gullak</button>
      </div>

    </div>
  </form>
  <br />
  <div class="ui-fluid shadow p-3 mb-5 bg-white rounded table table-hover">
    <div class="position-relative">
      <!-- <div class="position-absolute country-details" *ngIf="isDetails">
          <app-gulakdetailspage [details]="selectedRowDetails" [activeFields]="activeFields" (isdetailsclose)="isDetailsFalse($event)" (refreshParent)="ngOnInit()" (deleteSelected)="onDelete($event)"
    class="d-flex justify-content-end"></app-gulakdetailspage >
        </div> -->

      <div class="position-relative">


        <p-table [value]="gullakList" [paginator]="true" [lazy]="true" (onLazyLoad)="load($event)" [rows]="1"
          [totalRecords]="totalRecords" dataKey="Id" [scrollable]="true" scrollHeight="130vh" text-align: center>

          <ng-template pTemplate="header">
            <tr>
              <th>SKcode</th>
              <th>Name</th>
              <th>Shop Name</th>
              <th>Mobile</th>
              <th>City</th>
              <th>Warehouse</th>
              <th>Total Amount</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData>
            <tr (click)="openDetails(rowData,$event,WarehouseId)">
              <td>{{rowData.SKcode}}</td>
              <td>{{rowData.Name}}</td>
              <td>{{rowData.ShopName}}</td>
              <td>{{rowData.Mobile}}</td>
              <td>{{rowData.City}}</td>
              <td>{{rowData.Warehouse}}</td>
              <td>{{rowData.TotalAmount | number:'1.2-2'}}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
  <p-blockUI [blocked]="blocked"></p-blockUI>
  <p-progressSpinner *ngIf="blocked"
    [style]="{width: '50px', height: '50px', position: 'absolute', left: '48%', top: '48%'}" strokeWidth="8"
    fill="#EEEEEE" animationDuration=".5s"></p-progressSpinner>