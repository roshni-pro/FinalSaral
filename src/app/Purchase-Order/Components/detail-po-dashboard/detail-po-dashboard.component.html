<p-toast></p-toast>

<div class="row m-0">
    <div class="col-12">
        
        <div id="kick-start" class="kick-start card">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <h4 class="card-title">Detailed PO Dashboard</h4>
                    </div>
                </div>
            </div>
            <div class="card-content">
                <div class="card-body">
                    <div class="row">
                        


                        <div class="col-lg-2">
                            <div class="form-group">
                                <label> Warehouse:</label>
                                <div>
                                   <!-- {{filterdashboardsearch.WarehouseId |json}} -->
                                    <p-multiSelect id="warehouseids" name="warehouseids" [options]="warehouseList"
                                        [(ngModel)]="filterdashboardsearch.WarehouseId" 
                                         optionLabel="WarehouseName"></p-multiSelect>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2">
                            <div class="form-group">
                                <label> Supplier:</label>
                                <div>
                                  

                                    <p-autoComplete [suggestions]="sellerlist" (completeMethod)="getSeLlerList($event)"
                                        field="Name" [size]="15" (onSelect)="setSeller($event)"
                                        placeholder="enter at least 3 chars" [minLength]="3" name="Names" id="sellerid">
                                    </p-autoComplete>

                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2">
                            <div class="form-group">
                                <label> Buyer:</label>
                                <div>
                                    
                                    <select id="d43esg" name="daaaesg" class="form-control"
                                        [(ngModel)]="filterdashboardsearch.BuyerId">
                                        <option [value]="null">
                                            -- Select Buyer --
                                        </option>
                                        <option *ngFor="let at of buyersList" [value]="at.PeopleID">
                                            {{ at.DisplayName }}
                                        </option>
                                    </select>

                                    

                                </div>
                            </div>
                        </div>

                        <div class="col-lg-3">
                            <div class="form-group">

                                <div>
                                    <label for="startdate">Start Date: </label>
                                    <div>
                                        <p-calendar  [showIcon]="true" [(ngModel)]="filterdashboardsearch.StartDate"
                                        name="startDate" required="1" [readonlyInput]="true" #dateRangeListInput>
                                        
                                    </p-calendar>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label> End Date:</label>
                                <div>
                                    <p-calendar  [showIcon]="true" [maxDate]="maxDate" [(ngModel)]="filterdashboardsearch.EndDate"
                                        name="EndDate" required="1" [readonlyInput]="true" required #dateRangeListInput>
                                        
                                    </p-calendar>
                                </div>
                            </div>
                        </div>

                        
                    </div>
                    <div class="row">
                        <div class="col-3">
                            <div class="form-group">
                                <label> Purchase Order Id:</label>
                                <div>
                                    <input type="number" placeholder="Enter PoId" onkeyup="validity.valid||(value='')" pInputText [(ngModel)]="filterdashboardsearch.Poid"> 
                                </div>
                            </div>
                        </div>
                        <div class="col-1">
                            <div class="form-group">
                                <!-- <label> Search</label> -->
                                <br>
                                <div>
                                    <!-- (click)="GetPODashboardData();" -->
                                    <button type="button" pButton class="btn btn-raised btn-raised btn-primary c1"
                                    (click)="GetPODashboardData();" label="Search"></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-1">
                            <div class="form-group">
                                <!-- <label> Export</label> -->
                                <br>
                                <div>
                                    <!-- (click)="GetPODashboardData();" -->
                                    <button type="button" pButton class="btn btn-raised btn-raised btn-success c1"
                                    (click)="GetExportDashboardData();" label="Export"></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-1">
                            <div class="form-group">
                                <!-- <label> Reset:</label> -->
                                <br>
                                <div>
                                    <button type="button" pButton
                                        (click)="initialize(); filterdashboardsearch.WarehouseId = this.warehouseList; "
                                        label="Reset"></button>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
        
    </div>
</div>

<p-table [value]="dashboarddata" [rows]="10"[lazy]="true" [totalRecords]="totalRecords"
            (onLazyLoad)="load($event)"  [paginator]="true" [rows]="10" dataKey="ID" [scrollable]="true" [style]=""
             scrollHeight="70vh"  text-align: center>
                <ng-template pTemplate="header">
                    <tr> 
                        <th class="w">S.No.</th>
                        <th class="t">Po Number</th>
                        <th class="t">Po Cloned</th>
                        <th class="t">ClonePoId</th>
                        <th class="t">Supplier Name</th>
                        <th class="t">Warehouse Name</th>
                        <th class="t">Depo</th>
                        <th class="t">Creation Date</th>
                        <th class="t">Created By</th>
                        <th class="t">Approved By</th>
                        <th class="t">item Number</th>

                        <th class="t">Item Name</th>
                        <th class="t">ROC</th>
                        <th class="t">Po Quantity</th>
                        <th class="t">PO Price</th>
                        <th class="t">Item Amount</th>
                        <th class="t">Total PO Amount</th>
                        <th class="t">Po Status</th>
                        <th class="t">Payment Status</th>
                        <th class="t">Payment Terms</th>
                        <th class="t">Pr Payment Type</th>
                        <th class="t">Gr Date</th>
                        <th class="t">Gr Done By</th>
                        <th class="t">Gr Approved By</th>
                        <th class="t">Gr Qunatity </th>
                        <th class="t">Gr Unit Price</th>
                        <th class="t">Gr Item Amount</th>
                        <th class="t">Ir Quantity</th>
                        <th class="t">Ir Unit Price</th>
                        <th class="t">Ir Item Amount</th>
                        <th class="t">Total Gr Amount</th>
                        <th class="t">Ir Date</th>
                        <th class="t">Ir Done By</th>
                        <th class="t">Total Ir Amount</th>
                        
                    </tr> 
                </ng-template>
                <ng-template pTemplate="body" let-i let-rowIndex="rowIndex">
                    <tr>
                        <td class="w">{{rowIndex+1}}</td>
                        <td class="t">{{i.PurchaseOrderId}}</td>
                        <td class="t">{{i.PoCloned}}</td>
                        <td class="t">{{i.ClonePoId}}</td>
                        <td class="t">{{i.SupplierName}}</td>
                        <td class="t">{{i.WarehouseName}}</td>
                        <td class="t">{{i.DepoName}}</td>
                        <td class="t">{{i.CreationDate }}</td>
                        <td class="t">{{i.CreatedBy}}</td>
                        <td class="t">{{i.PoApprovedBy}}</td>
                        <td class="t">{{i.ItemNumber}}</td>
                        <td class="t">{{i.ItemName}}</td>
                        <td class="t">{{i.Tag?i.Tag:'--'}}</td>
                        <td class="t">{{i.TotalPoQuantity}}</td>
                        <td class="t">{{i.UnitPrice}}</td>
                        <td class="t">{{i.ItemAmount}}</td>
                        <td class="t">{{i.TotalPoAmount}}</td>
                        <td class="t">{{i.PoStatus}}</td>
                        <td class="t">{{i.PaymentStatus}}</td>
                        <td class="t">{{i.PaymentTerms}}</td>
                        <td class="t">{{i.PRPaymentType}}</td>
                        <td class="t">{{i.grdate }}</td>
                        <td class="t">{{i.grdoneby}}</td>
                        <td class="t">{{i.grapprovedby}}</td>
                        <td class="t">{{i.grqty}}</td>
                        <td class="t">{{i.grprice}}</td>
                        <td class="t">{{i.gritemamount}}</td>
                        <td class="t">{{i.IRQuantity}}</td>
                        <td class="t">{{i.IrPrice}}</td>
                        <td class="t">{{i.IrAmount}}</td>
                        <td class="t">{{i.GrTotalAmount}}</td>
                        <td class="t">{{i.IrCreationDate }}</td>
                        <td class="t">{{i.IrCreatedBy}}</td>  
                       <td class="t">{{i.IrTotalAmount}}</td>
                        
                        
                    </tr>

                </ng-template>
</p-table>