<p-toast></p-toast>

   
<p-confirmDialog #cd appendTo="body" header="Confirmation">
        <p-footer>
      
          <button type="button" class="btn btn-raised btn-primary mr-1" (click)="cd.reject()">No</button>
          <button type="button" class="btn btn-raised btn-danger mr-1" (click)="cd.accept()">Yes</button>
        </p-footer>
      </p-confirmDialog>
      
<div class="card">
    <div class="card-header pb-2">
        <h4 class="card-title" id="basic-layout-colored-form-control">Verify Notification</h4>
        <p class="mb-0">Please verify the same before save. you can not modify after.</p>
    </div>
    <div class="card-content" *ngIf="autoNotification">
        <div class="px-3">

            <form class="form"  #masterForm="ngForm">
                <div class="form-body">
                    <h4 class="form-section"><i class="ft-info"></i> Summary</h4>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">MASTER NAME</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.EntityName ? autoNotification.EntityName: '(NOT SET)'}}
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="userinput1">TITLE</label>
                                </div>
                            </div>
                            <div class="col-md-1">
                                <div class="form-group">
                                    :
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{autoNotification.AutoNotificationTitle ? autoNotification.AutoNotificationTitle: '(NOT SET)'}}
                                </div>
                            </div>
                        </div>

                               
                    <div class="row">
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="userinput1">CLASS NAME</label>
                                </div>
                            </div>
                            <div class="col-md-1">
                                <div class="form-group">
                                    :
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    {{autoNotification.ClassName ? autoNotification.ClassName: '(NOT SET)'}}
                                </div>
                            </div>
                        </div>

                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">DB-OBJECT NAME</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.DbObjectName ? autoNotification.DbObjectName: '(NOT SET)'}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">ON ACTION</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.EntityAction ? autoNotification.EntityAction: '(NOT SET)'}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">CITY</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.CityId? autoNotification.CityId : '(NOT SET)'}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">WAHREHOUSE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.WarehouseId ? autoNotification.WarehouseId : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">CLUSTER</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.ClusterId ? autoNotification.ClusterId : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">NOTIFICATION TYPE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.ANType ? autoNotification.ANType : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">EVENT TYPE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.ANEventType ? autoNotification.ANEventType : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">SCHEDULE TYPE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.ANScheduleMaster && autoNotification.ANScheduleMaster.Name ? autoNotification.ANScheduleMaster.Name : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">FREQUENCY TYPE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.ANFrequencyMaster && autoNotification.ANFrequencyMaster.Name ? autoNotification.ANFrequencyMaster.Name : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1"> RECUR EVERY</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.RecurEvery ? autoNotification.RecurEvery : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1"> START DATE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.StartDate ? (autoNotification.StartDate | date) : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1"> END DATE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.EndDate ? (autoNotification.EndDate  | date ): '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">AUTO DIAL URL</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.AutoDialUrl ? autoNotification.AutoDialUrl : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">FCM NOTIFICATION</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.FCMNotification ? autoNotification.FCMNotification : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="form-group">
                                <label for="userinput1">TEXT MESSAGE</label>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="form-group">
                                :
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{autoNotification.TextMessage ? autoNotification.TextMessage : '(NOT SET)' }}
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div *ngIf="autoNotification && autoNotification.AutoNotificationConditions">
                        <div *ngFor="let condition of autoNotification.AutoNotificationConditions">
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="userinput1"> FIELD NAME</label>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group">
                                        :
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        {{condition.FieldName ? condition.FieldName : '(NOT SET)' }}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="userinput1">OPERATOR</label>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group">
                                        :
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        {{condition.OperatorSign ? condition.OperatorSign : '(NOT SET)' }}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="userinput1">VALUE 1</label>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group">
                                        :
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        {{condition.Value1 ? condition.Value1 : '(NOT SET)' }}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="userinput1">VALUE 2</label>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group">
                                        :
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        {{condition.Value2 ? condition.Value2 : '(NOT SET)' }}
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="form-actions right">
                    <button type="button" class="btn btn-raised btn-warning mr-1" (click)="onCancel()">
                        <i class="ft-x"></i> Cancel
                    </button>
                    <button type="button" class="btn btn-raised btn-primary"  (click)="saveNotification(masterForm)" >
                            <!-- [disabled]="!autoNotification.IsSupplierNotification ||!autoNotification.IsCustomerNotification||!autoNotification.IsPeopleNotification" -->
                        <i class="fa fa-check-square-o"></i> Save
                    </button>
                </div>
            </form>

        </div>
    </div>
</div>

<p-blockUI [blocked]="blocked"></p-blockUI>
  <p-progressSpinner *ngIf="blocked"
    [style]="{width: '50px', height: '50px', position: 'absolute', left: '48%', top: '48%'}" strokeWidth="8"
    fill="#EEEEEE" animationDuration=".5s"></p-progressSpinner>